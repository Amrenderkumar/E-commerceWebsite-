<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShopSphere - Your Ultimate Shopping Destination</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .cart-badge {
            top: -5px;
            right: -5px;
        }
        .auth-modal {
            transition: all 0.3s ease;
        }
        .slide-in {
            right: 0 !important;
        }
        .slide-out {
            right: -100% !important;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">
    <!-- Navigation -->
    <nav class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <a href="#" class="text-2xl font-bold">ShopSphere</a>
            <div class="flex items-center space-x-6">
                <div class="hidden md:flex space-x-6">
                    <a href="#" class="hover:text-gray-200">Home</a>
                    <a href="#products" class="hover:text-gray-200">Products</a>
                    <a href="#about" class="hover:text-gray-200">About</a>
                    <a href="#contact" class="hover:text-gray-200">Contact</a>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="user-btn" class="relative">
                        <i class="fas fa-user text-xl"></i>
                    </button>
                    <button id="cart-btn" class="relative">
                        <i class="fas fa-shopping-cart text-xl"></i>
                        <span id="cart-count" class="cart-badge absolute bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center hidden">0</span>
                    </button>
                    <button id="mobile-menu-btn" class="md:hidden">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="md:hidden bg-indigo-700 hidden">
            <div class="px-4 py-3 space-y-3">
                <a href="#" class="block hover:text-gray-200">Home</a>
                <a href="#products" class="block hover:text-gray-200">Products</a>
                <a href="#about" class="block hover:text-gray-200">About</a>
                <a href="#contact" class="block hover:text-gray-200">Contact</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="gradient-bg text-white py-20 px-4">
        <div class="container mx-auto flex flex-col md:flex-row items-center">
            <div class="md:w-1/2 mb-10 md:mb-0">
                <h1 class="text-4xl md:text-5xl font-bold mb-4">Shop The Latest Trends</h1>
                <p class="text-xl mb-6">Discover amazing products at unbeatable prices. Free shipping on orders over $50.</p>
                <button onclick="window.location.href='#products'" class="bg-white text-indigo-700 px-6 py-3 rounded-full font-bold hover:bg-gray-100 transition duration-300">Shop Now</button>
            </div>
            <div class="md:w-1/2 flex justify-center">
                <img src="ecommerce.jpg" alt="Happy customer holding shopping bags with various products against a bright background" class="rounded-lg shadow-xl">
            </div>
        </div>
    </section>

    <!-- Products Section -->
    <section id="products" class="py-16 px-4">
        <div class="container mx-auto">
            <h2 class="text-3xl font-bold text-center mb-12">Our Products</h2>
            
            <!-- Filter Controls -->
            <div class="flex flex-col md:flex-row justify-between mb-8 items-center">
                <div class="mb-4 md:mb-0">
                    <span class="mr-2">Filter by:</span>
                    <select id="category-filter" class="border rounded px-3 py-1">
                        <option value="all">All Categories</option>
                        <option value="electronics">Electronics</option>
                        <option value="clothing">Clothing</option>
                        <option value="home">Home & Kitchen</option>
                    </select>
                </div>
                <div>
                    <span class="mr-2">Sort by:</span>
                    <select id="sort-by" class="border rounded px-3 py-1">
                        <option value="price-asc">Price: Low to High</option>
                        <option value="price-desc">Price: High to Low</option>
                        <option value="name-asc">Name: A-Z</option>
                        <option value="name-desc">Name: Z-A</option>
                    </select>
                </div>
            </div>
            
            <!-- Products Grid -->
            <div id="products-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8">
                <!-- Products will be loaded here dynamically -->
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="bg-white py-16 px-4">
        <div class="container mx-auto">
            <h2 class="text-3xl font-bold text-center mb-12">About ShopSphere</h2>
            <div class="flex flex-col md:flex-row items-center gap-10">
                <div class="md:w-1/2">
                    <img src="ecom1.webp" alt="Team of professionals working together in a modern office environment" class="rounded-lg shadow-lg">
                </div>
                <div class="md:w-1/2">
                    <h3 class="text-2xl font-semibold mb-4">Our Story</h3>
                    <p class="mb-4">Founded in 2023, ShopSphere has grown from a small startup to one of the most trusted e-commerce platforms. We're committed to providing our customers with the best shopping experience.</p>
                    <p class="mb-4">Our mission is simple: to deliver high-quality products with exceptional customer service. We work directly with manufacturers to cut out the middleman and pass the savings on to you.</p>
                    <div class="flex space-x-3 mt-6">
                        <div class="text-center p-4 border rounded-lg">
                            <div class="text-3xl font-bold text-indigo-600">10K+</div>
                            <div>Happy Customers</div>
                        </div>
                        <div class="text-center p-4 border rounded-lg">
                            <div class="text-3xl font-bold text-indigo-600">500+</div>
                            <div>Quality Products</div>
                        </div>
                        <div class="text-center p-4 border rounded-lg">
                            <div class="text-3xl font-bold text-indigo-600">24/7</div>
                            <div>Customer Support</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-16 px-4 bg-gray-50">
        <div class="container mx-auto">
            <h2 class="text-3xl font-bold text-center mb-12">Contact Us</h2>
            <div class="max-w-2xl mx-auto bg-white rounded-lg shadow-md p-8">
                <form>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label for="name" class="block mb-2 text-sm font-medium text-gray-700">Name</label>
                            <input type="text" id="name" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                        </div>
                        <div>
                            <label for="email" class="block mb-2 text-sm font-medium text-gray-700">Email</label>
                            <input type="email" id="email" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                        </div>
                    </div>
                    <div class="mt-6">
                        <label for="subject" class="block mb-2 text-sm font-medium text-gray-700">Subject</label>
                        <input type="text" id="subject" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                    </div>
                    <div class="mt-6">
                        <label for="message" class="block mb-2 text-sm font-medium text-gray-700">Message</label>
                        <textarea id="message" rows="5" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"></textarea>
                    </div>
                    <button type="submit" class="mt-6 gradient-bg text-white px-6 py-3 rounded-lg font-bold hover:opacity-90 transition duration-300 w-full">Send Message</button>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12 px-4">
        <div class="container mx-auto">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4">ShopSphere</h3>
                    <p>Your one-stop destination for all your shopping needs. Quality products, exceptional service.</p>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4">Quick Links</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="hover:text-indigo-300">Home</a></li>
                        <li><a href="#products" class="hover:text-indigo-300">Products</a></li>
                        <li><a href="#about" class="hover:text-indigo-300">About Us</a></li>
                        <li><a href="#contact" class="hover:text-indigo-300">Contact</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4">Customer Service</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="hover:text-indigo-300">FAQs</a></li>
                        <li><a href="#" class="hover:text-indigo-300">Shipping Policy</a></li>
                        <li><a href="#" class="hover:text-indigo-300">Returns & Refunds</a></li>
                        <li><a href="#" class="hover:text-indigo-300">Track Order</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4">Connect With Us</h4>
                    <div class="flex space-x-4 mb-4">
                        <a href="#" class="hover:text-indigo-300"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="hover:text-indigo-300"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="hover:text-indigo-300"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="hover:text-indigo-300"><i class="fab fa-pinterest"></i></a>
                    </div>
                    <p>Subscribe to our newsletter</p>
                    <div class="flex mt-2">
                        <input type="email" placeholder="Your email" class="px-3 py-2 text-gray-800 rounded-l-lg w-full">
                        <button class="bg-indigo-600 px-4 rounded-r-lg"><i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 text-center">
                <p>&copy; 2023 ShopSphere. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Authentication Modal -->
    <div id="auth-modal" class="auth-modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-md p-6 relative fade-in">
            <button id="close-auth-modal" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700">
                <i class="fas fa-times"></i>
            </button>
            <div id="auth-tabs" class="flex border-b mb-6">
                <button id="login-tab" class="px-4 py-2 font-medium border-b-2 border-indigo-600 text-indigo-600">Login</button>
                <button id="register-tab" class="px-4 py-2 font-medium text-gray-500 hover:text-gray-700">Register</button>
            </div>
            <!-- Login Form -->
            <div id="login-form">
                <div class="mb-4">
                    <label for="login-email" class="block mb-2 text-sm font-medium text-gray-700">Email</label>
                    <input type="email" id="login-email" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>
                <div class="mb-6">
                    <label for="login-password" class="block mb-2 text-sm font-medium text-gray-700">Password</label>
                    <input type="password" id="login-password" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>
                <button id="login-btn" class="gradient-bg text-white px-6 py-3 rounded-lg font-bold hover:opacity-90 transition duration-300 w-full">Login</button>
                <div class="text-center mt-4 text-sm text-gray-600">
                    Don't have an account? <button id="show-register" class="text-indigo-600 hover:underline">Register</button>
                </div>
            </div>
            <!-- Register Form -->
            <div id="register-form" class="hidden">
                <div class="mb-4">
                    <label for="reg-name" class="block mb-2 text-sm font-medium text-gray-700">Full Name</label>
                    <input type="text" id="reg-name" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>
                <div class="mb-4">
                    <label for="reg-email" class="block mb-2 text-sm font-medium text-gray-700">Email</label>
                    <input type="email" id="reg-email" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>
                <div class="mb-4">
                    <label for="reg-password" class="block mb-2 text-sm font-medium text-gray-700">Password</label>
                    <input type="password" id="reg-password" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>
                <div class="mb-6">
                    <label for="reg-confirm-password" class="block mb-2 text-sm font-medium text-gray-700">Confirm Password</label>
                    <input type="password" id="reg-confirm-password" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                </div>
                <button id="register-btn" class="gradient-bg text-white px-6 py-3 rounded-lg font-bold hover:opacity-90 transition duration-300 w-full">Register</button>
                <div class="text-center mt-4 text-sm text-gray-600">
                    Already have an account? <button id="show-login" class="text-indigo-600 hover:underline">Login</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Cart Sidebar -->
    <div id="cart-sidebar" class="fixed top-0 right-0 h-full w-full md:w-1/3 lg:w-1/4 bg-white shadow-lg z-40 overflow-y-auto transition-transform duration-300 ease-in-out slide-out">
        <div class="p-4 border-b flex justify-between items-center">
            <h3 class="text-xl font-bold">Your Cart</h3>
            <button id="close-cart" class="text-gray-500 hover:text-gray-700">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div id="cart-items" class="p-4">
            <!-- Cart items will be loaded here -->
            <div class="text-center py-8 text-gray-500">Your cart is empty</div>
        </div>
        <div class="p-4 border-t">
            <div class="flex justify-between mb-4">
                <span class="font-semibold">Subtotal:</span>
                <span id="cart-subtotal">$0.00</span>
            </div>
            <div class="flex justify-between mb-4">
                <span class="font-semibold">Shipping:</span>
                <span id="cart-shipping">$5.00</span>
            </div>
            <div class="flex justify-between mb-6 text-lg">
                <span class="font-bold">Total:</span>
                <span id="cart-total" class="font-bold">$5.00</span>
            </div>
            <button id="checkout-btn" class="gradient-bg text-white px-6 py-3 rounded-lg font-bold hover:opacity-90 transition duration-300 w-full">Proceed to Checkout</button>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div id="checkout-modal" class="auth-modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-lg p-6 relative fade-in">
            <button id="close-checkout-modal" class="absolute top-4 right-4 text-gray-500 hover:text-gray-700">
                <i class="fas fa-times"></i>
            </button>
            <h2 class="text-2xl font-bold mb-6">Checkout</h2>
            <form id="checkout-form">
                <div class="mb-6">
                    <h3 class="text-lg font-semibold mb-4">Shipping Information</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="first-name" class="block mb-2 text-sm font-medium text-gray-700">First Name</label>
                            <input type="text" id="first-name" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" required>
                        </div>
                        <div>
                            <label for="last-name" class="block mb-2 text-sm font-medium text-gray-700">Last Name</label>
                            <input type="text" id="last-name" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" required>
                        </div>
                    </div>
                    <div class="mt-4">
                        <label for="address" class="block mb-2 text-sm font-medium text-gray-700">Address</label>
                        <input type="text" id="address" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" required>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
                        <div>
                            <label for="city" class="block mb-2 text-sm font-medium text-gray-700">City</label>
                            <input type="text" id="city" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" required>
                        </div>
                        <div>
                            <label for="state" class="block mb-2 text-sm font-medium text-gray-700">State</label>
                            <input type="text" id="state" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" required>
                        </div>
                        <div>
                            <label for="zip" class="block mb-2 text-sm font-medium text-gray-700">ZIP Code</label>
                            <input type="text" id="zip" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" required>
                        </div>
                    </div>
                </div>
                <div class="mb-6">
                    <h3 class="text-lg font-semibold mb-4">Payment Information</h3>
                    <div class="bg-gray-100 p-4 rounded-lg">
                        <div class="mb-4">
                            <label for="card-number" class="block mb-2 text-sm font-medium text-gray-700">Card Number</label>
                            <input type="text" id="card-number" placeholder="1234 5678 9012 3456" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" required>
                        </div>
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="expiry" class="block mb-2 text-sm font-medium text-gray-700">Expiry Date</label>
                                <input type="text" id="expiry" placeholder="MM/YY" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" required>
                            </div>
                            <div>
                                <label for="cvc" class="block mb-2 text-sm font-medium text-gray-700">CVC</label>
                                <input type="text" id="cvc" placeholder="123" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" required>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex items-center mb-6">
                    <input type="checkbox" id="save-info" class="mr-2">
                    <label for="save-info" class="text-sm text-gray-700">Save this information for next time</label>
                </div>
                <button type="submit" id="place-order-btn" class="gradient-bg text-white px-6 py-3 rounded-lg font-bold hover:opacity-90 transition duration-300 w-full">Place Order</button>
            </form>
        </div>
    </div>

    <!-- Order Confirmation Modal -->
    <div id="order-confirmation" class="auth-modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-md p-6 text-center fade-in">
            <div class="text-green-500 text-5xl mb-4">
                <i class="fas fa-check-circle"></i>
            </div>
            <h2 class="text-2xl font-bold mb-2">Order Confirmed!</h2>
            <p class="mb-6">Thank you for your purchase. Your order has been placed successfully.</p>
            <p class="text-sm text-gray-500 mb-6">Order #: <span id="order-number" class="font-mono">SHOP-123456</span></p>
            <button id="continue-shopping" class="gradient-bg text-white px-6 py-3 rounded-lg font-bold hover:opacity-90 transition duration-300 w-full">Continue Shopping</button>
        </div>
    </div>

    <script>
        // Sample product data
        const products = [
            {
                id: 1,
                name: "Wireless Bluetooth Headphones",
                price: 89.99,
                category: "electronics",
                image: "ecom2.jpg",
                alt: "Premium wireless headphones with noise cancellation features in black color",
                description: "Experience crystal clear sound with our premium wireless Bluetooth headphones featuring noise cancellation technology."
            },
            {
                id: 2,
                name: "Smart Watch Pro",
                price: 199.99,
                category: "electronics",
                image: "ecom3.jpg",
                alt: "Modern smartwatch with fitness tracking and notification features",
                description: "Stay connected and track your fitness with our feature-packed smart watch."
            },
            {
                id: 3,
                name: "Organic Cotton T-Shirt",
                price: 24.99,
                category: "clothing",
                image: "dress1.jpg",
                alt: "Basic white organic cotton t-shirt on a hanger with minimalist design",
                description: "Comfortable and eco-friendly organic cotton t-shirt available in multiple colors."
            },
            {
                id: 4,
                name: "Stainless Steel Water Bottle",
                price: 19.99,
                category: "home",
                image: "botle.webp",
                alt: "Insulated stainless steel water bottle with grey matte finish",
                description: "Keep your drinks hot or cold for hours with our premium stainless steel water bottle."
            },
            {
                id: 5,
                name: "Leather Wallet",
                price: 49.99,
                category: "clothing",
                image: "wallet.jpg",
                alt: "Genuine leather wallet with multiple card slots and RFID protection",
                description: "Premium quality leather wallet with RFID protection and ample storage space."
            },
            {
                id: 6,
                name: "Air Fryer",
                price: 129.99,
                category: "home",
                image: "air fryer.webp",
                alt: "Digital air fryer with touch controls and glass viewing window",
                description: "Cook healthier meals with our digital air fryer that uses little to no oil."
            },
            {
                id: 7,
                name: "Wireless Charging Pad",
                price: 29.99,
                category: "electronics",
                image: "wire.webp",
                alt: "Sleek wireless charging pad for smartphones with LED indicator",
                description: "Charge your devices wirelessly with our fast charging pad compatible with all Qi-enabled devices."
            },
            {
                id: 8,
                name: "Cotton Throw Blanket",
                price: 34.99,
                category: "home",
                image: "cotton.jpg",
                alt: "Soft grey cotton throw blanket casually draped over a couch",
                description: "Soft and cozy cotton throw blanket perfect for your living room or bedroom."
            }
        ];

        // Cart functionality
        let cart = [];
        let currentUser = null;

        // DOM Elements
        const productsGrid = document.getElementById('products-grid');
        const categoryFilter = document.getElementById('category-filter');
        const sortBy = document.getElementById('sort-by');
        const cartBtn = document.getElementById('cart-btn');
        const cartSidebar = document.getElementById('cart-sidebar');
        const closeCart = document.getElementById('close-cart');
        const cartItems = document.getElementById('cart-items');
        const cartCount = document.getElementById('cart-count');
        const cartSubtotal = document.getElementById('cart-subtotal');
        const cartTotal = document.getElementById('cart-total');
        const checkoutBtn = document.getElementById('checkout-btn');
        const userBtn = document.getElementById('user-btn');
        const authModal = document.getElementById('auth-modal');
        const closeAuthModal = document.getElementById('close-auth-modal');
        const loginTab = document.getElementById('login-tab');
        const registerTab = document.getElementById('register-tab');
        const loginForm = document.getElementById('login-form');
        const registerForm = document.getElementById('register-form');
        const showRegister = document.getElementById('show-register');
        const showLogin = document.getElementById('show-login');
        const loginBtn = document.getElementById('login-btn');
        const registerBtn = document.getElementById('register-btn');
        const checkoutModal = document.getElementById('checkout-modal');
        const closeCheckoutModal = document.getElementById('close-checkout-modal');
        const checkoutForm = document.getElementById('checkout-form');
        const placeOrderBtn = document.getElementById('place-order-btn');
        const orderConfirmation = document.getElementById('order-confirmation');
        const continueShopping = document.getElementById('continue-shopping');
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');

        // Functions
        function renderProducts(productsToRender) {
            productsGrid.innerHTML = '';
            
            if (productsToRender.length === 0) {
                productsGrid.innerHTML = '<div class="col-span-full text-center py-8 text-gray-500">No products found matching your criteria.</div>';
                return;
            }
            
            productsToRender.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'bg-white rounded-lg shadow-md overflow-hidden product-card transition duration-300';
                productCard.innerHTML = `
                    <div class="h-48 overflow-hidden">
                        <img src="${product.image}" alt="${product.alt}" class="w-full h-full object-cover">
                    </div>
                    <div class="p-4">
                        <h3 class="font-bold text-lg mb-2">${product.name}</h3>
                        <p class="text-gray-600 text-sm mb-3 line-clamp-2">${product.description}</p>
                        <div class="flex justify-between items-center">
                            <span class="font-bold text-lg">$${product.price.toFixed(2)}</span>
                            <button class="add-to-cart bg-indigo-600 text-white px-3 py-1 rounded-full text-sm hover:bg-indigo-700" data-id="${product.id}">
                                <i class="fas fa-cart-plus mr-1"></i> Add
                            </button>
                        </div>
                    </div>
                `;
                productsGrid.appendChild(productCard);
            });
            
            // Add event listeners to new add to cart buttons
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', (e) => {
                    if (!currentUser) {
                        alert('Please log in to add items to your cart');
                        authModal.classList.remove('hidden');
                        return;
                    }
                    const productId = parseInt(e.target.getAttribute('data-id') || e.target.parentElement.getAttribute('data-id'));
                    addToCart(productId);
                });
            });
        }

        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    ...product,
                    quantity: 1
                });
            }
            
            updateCart();
            showCartSidebar();
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            updateCart();
        }

        function updateCartItemQuantity(productId, quantity) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity = quantity;
                if (item.quantity <= 0) {
                    removeFromCart(productId);
                } else {
                    updateCart();
                }
            }
        }

        function updateCart() {
            // Update cart items display
            if (cart.length === 0) {
                cartItems.innerHTML = '<div class="text-center py-8 text-gray-500">Your cart is empty</div>';
            } else {
                cartItems.innerHTML = cart.map(item => `
                    <div class="flex border-b py-4">
                        <div class="w-20 h-20 bg-gray-100 rounded overflow-hidden">
                            <img src="${item.image}" alt="${item.alt}" class="w-full h-full object-cover">
                        </div>
                        <div class="ml-4 flex-grow">
                            <h4 class="font-medium">${item.name}</h4>
                            <div class="text-gray-600 text-sm">$${item.price.toFixed(2)}</div>
                            <div class="flex items-center mt-2">
                                <button class="quantity-btn text-gray-500 hover:text-indigo-600" data-id="${item.id}" data-action="decrease">-</button>
                                <input type="number" value="${item.quantity}" min="1" class="quantity-input w-12 text-center border rounded mx-2 py-1 text-sm" data-id="${item.id}">
                                <button class="quantity-btn text-gray-500 hover:text-indigo-600" data-id="${item.id}" data-action="increase">+</button>
                            </div>
                        </div>
                        <div class="flex flex-col justify-between items-end">
                            <div class="font-medium">$${(item.price * item.quantity).toFixed(2)}</div>
                            <button class="remove-btn text-red-500 hover:text-red-700" data-id="${item.id}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `).join('');
                
                // Add event listeners to new quantity controls
                document.querySelectorAll('.quantity-btn').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const productId = parseInt(e.target.getAttribute('data-id'));
                        const action = e.target.getAttribute('data-action');
                        const item = cart.find(item => item.id === productId);
                        if (item) {
                            if (action === 'increase') {
                                updateCartItemQuantity(productId, item.quantity + 1);
                            } else if (action === 'decrease') {
                                updateCartItemQuantity(productId, item.quantity - 1);
                            }
                        }
                    });
                });
                
                document.querySelectorAll('.quantity-input').forEach(input => {
                    input.addEventListener('change', (e) => {
                        const productId = parseInt(e.target.getAttribute('data-id'));
                        const quantity = parseInt(e.target.value);
                        if (!isNaN(quantity) && quantity > 0) {
                            updateCartItemQuantity(productId, quantity);
                        } else {
                            e.target.value = cart.find(item => item.id === productId).quantity;
                        }
                    });
                });
                
                document.querySelectorAll('.remove-btn').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const productId = parseInt(e.target.getAttribute('data-id') || e.target.parentElement.getAttribute('data-id'));
                        removeFromCart(productId);
                    });
                });
            }
            
            // Update cart totals
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const shipping = subtotal > 50 ? 0 : 5;
            const total = subtotal + shipping;
            
            cartSubtotal.textContent = `$${subtotal.toFixed(2)}`;
            cartTotal.textContent = `$${total.toFixed(2)}`;
            
            // Update cart count in navbar
            const itemCount = cart.reduce((sum, item) => sum + item.quantity, 0);
            if (itemCount > 0) {
                cartCount.textContent = itemCount;
                cartCount.classList.remove('hidden');
            } else {
                cartCount.classList.add('hidden');
            }
        }

        function filterAndSortProducts() {
            const category = categoryFilter.value;
            const sort = sortBy.value;
            
            let filteredProducts = [...products];
            
            // Filter by category
            if (category !== 'all') {
                filteredProducts = filteredProducts.filter(product => product.category === category);
            }
            
            // Sort products
            switch (sort) {
                case 'price-asc':
                    filteredProducts.sort((a, b) => a.price - b.price);
                    break;
                case 'price-desc':
                    filteredProducts.sort((a, b) => b.price - a.price);
                    break;
                case 'name-asc':
                    filteredProducts.sort((a, b) => a.name.localeCompare(b.name));
                    break;
                case 'name-desc':
                    filteredProducts.sort((a, b) => b.name.localeCompare(a.name));
                    break;
            }
            
            renderProducts(filteredProducts);
        }

        function showCartSidebar() {
            cartSidebar.classList.remove('slide-out');
            cartSidebar.classList.add('slide-in');
            document.body.style.overflow = 'hidden';
        }

        function hideCartSidebar() {
            cartSidebar.classList.remove('slide-in');
            cartSidebar.classList.add('slide-out');
            document.body.style.overflow = '';
        }

        function showAuthModal() {
            authModal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function hideAuthModal() {
            authModal.classList.add('hidden');
            document.body.style.overflow = '';
        }

        function showLoginForm() {
            loginForm.classList.remove('hidden');
            registerForm.classList.add('hidden');
            loginTab.classList.add('border-indigo-600', 'text-indigo-600');
            loginTab.classList.remove('text-gray-500');
            registerTab.classList.remove('border-indigo-600', 'text-indigo-600');
            registerTab.classList.add('text-gray-500');
        }

        function showRegisterForm() {
            registerForm.classList.remove('hidden');
            loginForm.classList.add('hidden');
            registerTab.classList.add('border-indigo-600', 'text-indigo-600');
            registerTab.classList.remove('text-gray-500');
            loginTab.classList.remove('border-indigo-600', 'text-indigo-600');
            loginTab.classList.add('text-gray-500');
        }

        function showCheckoutModal() {
            if (!currentUser) {
                alert('Please log in to checkout');
                authModal.classList.remove('hidden');
                return;
            }
            
            if (cart.length === 0) {
                alert('Your cart is empty');
                return;
            }
            
            checkoutModal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            hideCartSidebar();
        }

        function hideCheckoutModal() {
            checkoutModal.classList.add('hidden');
            document.body.style.overflow = '';
        }

        function showOrderConfirmation() {
            orderConfirmation.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            hideCheckoutModal();
            
            // Generate a random order number
            document.getElementById('order-number').textContent = `SHOP-${Math.floor(100000 + Math.random() * 900000)}`;
        }

        function hideOrderConfirmation() {
            orderConfirmation.classList.add('hidden');
            document.body.style.overflow = '';
        }

        function login() {
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            // Simple validation
            if (!email || !password) {
                alert('Please enter both email and password');
                return;
            }
            
            // In a real app, you would verify credentials with the backend
            currentUser = {
                email: email,
                name: email.split('@')[0] // Simplistic way to generate a name
            };
            
            hideAuthModal();
            alert(`Welcome back, ${currentUser.name}!`);
        }

        function register() {
            const name = document.getElementById('reg-name').value;
            const email = document.getElementById('reg-email').value;
            const password = document.getElementById('reg-password').value;
            const confirmPassword = document.getElementById('reg-confirm-password').value;
            
            // Simple validation
            if (!name || !email || !password || !confirmPassword) {
                alert('Please fill in all fields');
                return;
            }
            
            if (password !== confirmPassword) {
                alert('Passwords do not match');
                return;
            }
            
            // In a real app, you would register the user with the backend
            currentUser = {
                email: email,
                name: name
            };
            
            hideAuthModal();
            alert(`Welcome to ShopSphere, ${name}! You can now shop and checkout.`);
            
            // Switch back to login form for next time
            showLoginForm();
        }

        function placeOrder() {
            // In a real app, you would send the order to the backend
            const orderDetails = {
                user: currentUser,
                items: cart,
                shippingInfo: {
                    firstName: document.getElementById('first-name').value,
                    lastName: document.getElementById('last-name').value,
                    address: document.getElementById('address').value,
                    city: document.getElementById('city').value,
                    state: document.getElementById('state').value,
                    zip: document.getElementById('zip').value
                },
                paymentInfo: {
                    cardNumber: document.getElementById('card-number').value,
                    expiry: document.getElementById('expiry').value,
                    cvc: document.getElementById('cvc').value
                },
                orderDate: new Date().toISOString()
            };
            
            // For demo purposes, just log the order
            console.log('Order placed:', orderDetails);
            
            // Show confirmation and clear cart
            cart = [];
            updateCart();
            showOrderConfirmation();
        }

        function toggleMobileMenu() {
            mobileMenu.classList.toggle('hidden');
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', () => {
            // Initial render
            renderProducts(products);
            
            // Filter/sort controls
            categoryFilter.addEventListener('change', filterAndSortProducts);
            sortBy.addEventListener('change', filterAndSortProducts);
            
            // Cart controls
            cartBtn.addEventListener('click', showCartSidebar);
            closeCart.addEventListener('click', hideCartSidebar);
            checkoutBtn.addEventListener('click', showCheckoutModal);
            
            // Auth controls
            userBtn.addEventListener('click', showAuthModal);
            closeAuthModal.addEventListener('click', hideAuthModal);
            loginTab.addEventListener('click', showLoginForm);
            registerTab.addEventListener('click', showRegisterForm);
            showRegister.addEventListener('click', showRegisterForm);
            showLogin.addEventListener('click', showLoginForm);
            loginBtn.addEventListener('click', login);
            registerBtn.addEventListener('click', register);
            
            // Checkout controls
            closeCheckoutModal.addEventListener('click', hideCheckoutModal);
            checkoutForm.addEventListener('submit', (e) => {
                e.preventDefault();
                placeOrder();
            });
            
            // Order confirmation
            continueShopping.addEventListener('click', () => {
                hideOrderConfirmation();
                window.scrollTo(0, 0);
            });
            
            // Close modals when clicking outside
            authModal.addEventListener('click', (e) => {
                if (e.target === authModal) {
                    hideAuthModal();
                }
            });
            
            checkoutModal.addEventListener('click', (e) => {
                if (e.target === checkoutModal) {
                    hideCheckoutModal();
                }
            });
            
            orderConfirmation.addEventListener('click', (e) => {
                if (e.target === orderConfirmation) {
                    hideOrderConfirmation();
                }
            });
            
            // Mobile menu
            mobileMenuBtn.addEventListener('click', toggleMobileMenu);
        });
    </script>
</body>
</html>
